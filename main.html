<html>

<head>

<script>
	var dkc2ldd = {};
	var dkc2debug = {};
</script>

<script src="./decompressor_debug.js"></script>

<script src="./img.js"></script>

<script src="./lib.js"></script>

<script src="./gfx.js"></script>
<script src="./gfxHARD/create_4formatedTileset.js"></script>
<script src="./gfxHARD/create_mapchipGfxBuffer.js"></script>
<script src="./gfxHARD/create_mapchipGfxBuffer_OLD_0.js"></script>
<script src="./gfxHARD/create_mapchipGfxBuffer_OLD_1.js"></script>

<script src="./ref.js"></script>

<script src="./write.js"></script>
<script src="./features.js"></script>

<script src="./interface.js"></script>
<script src="./events.js"></script>

<script src="./editor.js"></script>

<script src="./editor/mode_00.js"></script>
<script src="./editor/mode_0.js"></script>
<script src="./editor/mode_1.js"></script>
<script src="./editor/mode_2.js"></script>
<script src="./editor/mode_3.js"></script>
<script src="./editor/mode_4.js"></script>
<script src="./editor/mode_5.js"></script>
<script src="./editor/mode_6.js"></script>
<script src="./editor/mode_7.js"></script>
<script src="./editor/mode_8.js"></script>
<script src="./editor/mode_9.js"></script>


<script>
</script>


</head>

<body>
	DKC TWOOL PROTOTYPE VERSION
</body>

<script>

	dkc2ldd.interface.create_userInterface();
	dkc2ldd.interface.start_workspace();
	
	dkc2ldd.event.setEvent_srcFilePanel();
	dkc2ldd.event.setEvent_editModePanel();

</script>

<script src="./preload.js"></script>
<script src="./debug.js"></script>

<script>
	(function(app=dkc2ldd){

		let params = new URLSearchParams(location.search);
		let p = params;

		if(p.has('preload') && p.get('preload')==='rom'){
			app.interface.srcFilePanel.rom.set_oneDataFile(
				{name:'decompressed U1.0 rom.smc', data:dkc2debug.preload.decompressedRom, useDec:false}, true
			);
		}

		if(p.has('demo') && p.get('demo')==='animated'){

			// set file data
			app.interface.update_workspace('mode_');
			
			// show mapchip with animated tileset
			app.interface.srcFilePanel.mapchip.parameters.value = "vram=1";
			app.interface.update_workspace('mode2');

			// hide side panels
			let fakeEvent = {stopPropagation:function(){},preventDefault:function(){}};
			app.event.slide_panel(fakeEvent, app.interface.srcFilePanel);
			app.event.slide_panel(fakeEvent, app.interface.editModePanel);
		
		}

	})();
</script>

	
</html>





